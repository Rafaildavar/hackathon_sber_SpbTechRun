toxicity_check_prompt: |
  Проверь сообщение пользователя на токсичность.
  Токсичным считается сообщение, содержащее:
  - Оскорбления, ругательства, нецензурную лексику
  - Агрессию, угрозы
  - Дискриминацию по любым признакам

  Сообщение пользователя: {{message}}

parser_extract_url_prompt: |
  Извлеки все URL из сообщения пользователя. Если URL нет, верни пустой список.

  Сообщение: {{message}}

parser_classification_prompt: |
  Определи, содержит ли сообщение пользователя документы или ссылки на документы, которые нужно обработать.

  Сообщение: {{message}}
  История: {{history}}

router_classify_prompt: |
  Проанализируй запрос пользователя и определи, какой тип запроса это:
  - api_request: если нужно обратиться к городским API (МФЦ, поликлиники, школы, детсады, афиша, красивые места, услуги для пенсионеров)
  - web_search: если нужна актуальная информация из интернета
  - rag_search: если вопрос можно ответить по базе знаний документов

  Запрос пользователя: {{message}}
  Классификация из предыдущих шагов: {{classification}}
  История: {{history}}

retrieval_generate_queries_prompt: |
  На основе вопроса пользователя сгенерируй 3-5 поисковых запросов для поиска в базе знаний.
  Запросы должны быть разнообразными и покрывать разные аспекты вопроса.

  Вопрос пользователя: {{message}}

clarification_check_prompt: |
  Проанализируй вопрос пользователя и определи, нужны ли уточнения для ответа.
  Учитывай контекст из истории диалога и найденную информацию.

  Вопрос: {{message}}
  История: {{history}}
  Найденная информация: {{requires_web_search}}

context_system_prompt: |
  Ты системный промпт для генерации итогового ответа пользователю

  Текущий запрос: {{message}}
  История: {{history}}

context_prepare_prompt: |
  Подготовь контекст для ответа пользователю на основе всей собранной информации.

  Запрос: {{message}}
  RAG данные: {{api_data}}
  Web search результаты: {{web_search_results}}
  Документы пользователя: {{has_user_documents}}
  История: {{history}}

conversational_prompt: |
  Ты интеллектуальный агент "Городской советник" для жителей Санкт-Петербурга.
  Отвечай кратко, по делу, с уважением и человечностью.
  Используй только предоставленную информацию из контекста.
  Если информации недостаточно, вежливо сообщи об этом.

  Контекст: {{context}}

  Вопрос пользователя: {{message}}